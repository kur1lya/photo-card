{"version":3,"sources":["components/Images.js","hooks/useKeyPress.js","components/KeyFocus.js","App.js","reportWebVitals.js","index.js"],"names":["Images","props","img_id","section_id","tabIndex","sortImages","Fragment","map","data","className","item","fallback","alt","id","src","farm","server","secret","useKeypress","key","action","useEffect","onKeyup","e","window","addEventListener","removeEventListener","KeyFocus","x","y","id_focus","currentIndex","document","activeElement","fetchData","undefined","id_photo","getElementById","focus","length","needLoadMore","Math","min","App","useState","images","setImages","numberOfPages","setNumberOfPages","firstLoad","setFirstLoad","then","a","fetch","response","json","photos","photo","cut_photo","splice","push","cuur_id_photo","forEach","n","element","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","basename","process"],"mappings":"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","file":"static/js/main.0cd4dfd5.chunk.js","sourcesContent":["import React, { Suspense } from 'react';\nimport '../App.css';\n\n\nfunction Images(props) {\n\n    let img_id = 0\n    let section_id = 0\n    let tabIndex = 0\n    const { sortImages } = props\n\n    return (\n        <React.Fragment>\n            {sortImages.map((data) => {\n                return <div className={'card_image section_' + section_id++}>\n                    {\n                        data.map((item) => {\n                            return <Suspense fallback={<div>Loading...</div>} >\n                                <img alt='img' className='image' id={img_id++} tabIndex={tabIndex++}\n                                    key={item.id} src={'https://farm' + item.farm + '.staticflickr.com/' + item.server + '/' + item.id + '_' + item.secret + '.jpg'}></img>\n                            </Suspense>\n\n                        })\n                    }\n                </div>\n            })}\n        </React.Fragment>)\n\n\n\n}\n\nexport default Images\n","import { useEffect } from \"react\";\n\nexport default function useKeypress(key, action) {\n    useEffect(() => {\n      function onKeyup(e) {\n        if (e.key === key) action()\n      }\n      window.addEventListener('keyup', onKeyup);\n      return () => window.removeEventListener('keyup', onKeyup);\n    }, []);\n  }","import useKeypress from \"../hooks/useKeyPress\";\nimport React from 'react'\n\n\n\n\nfunction KeyFocus(props) {\n\n  let x = 0\n  let y = 0\n  let id_focus = 0\n  let currentIndex = +document.activeElement.tabIndex;\n  let Cols = 5\n  const rows_before_loading = 15\n\n  const { fetchData, sortImages } = props\n\n\n  const needLoadMore = (currentIndex) => {\n    const limit = sortImages.length * 5 - rows_before_loading;\n    return currentIndex >= limit;\n  }\n\n  useKeypress('ArrowRight', () => {\n    x += 1\n    if (sortImages[y][x] === undefined) {\n      x -= 1\n    }\n    id_focus = sortImages[y][x].id_photo\n    document.getElementById(`${id_focus}`).focus();\n\n  });\n\n\n\n  useKeypress('ArrowLeft', () => {\n    x -= 1\n    if (sortImages[y][x] === undefined) {\n      x += 1\n    }\n    id_focus = sortImages[y][x].id_photo\n    document.getElementById(`${id_focus}`).focus();\n\n  })\n\n\n\n  useKeypress('ArrowUp', () => {\n    y -= 1\n    if (sortImages[y] === undefined) {\n      y += 1\n    }\n    id_focus = sortImages[y][x].id_photo\n    document.getElementById(`${id_focus}`).focus();\n\n  })\n\n\n  useKeypress('ArrowDown', () => {\n    y += 1\n    if (sortImages[y] === undefined) {\n      y -= 1\n    }\n    id_focus = sortImages[y][x].id_photo\n    document.getElementById(`${id_focus}`).focus();\n    currentIndex = Math.min(currentIndex + Cols, sortImages.length * Cols - 1);\n\n    if (needLoadMore(currentIndex)) {\n      fetchData()\n    }\n  })\n\n  return (\n    <React.Fragment />\n  )\n}\n\nexport default KeyFocus\n\n","import React, { useEffect, useState } from 'react';\nimport './App.css';\nimport Images from './components/Images';\nimport KeyFocus from './components/KeyFocus';\n\n\n\n\nfunction App() {\n\n  const [images, setImages] = useState([])\n  const [numberOfPages, setNumberOfPages] = useState(50)\n  const [sortImages, setSortImages] = useState([])\n  const [firstLoad, setFirstLoad] = useState(true)\n\n  useEffect(() => {\n    if (firstLoad) {\n      fetchData().then(() => {\n        document.getElementById(\"0\").focus();\n      })\n      setNumberOfPages(40)\n    }\n    setFirstLoad(false)\n\n  }, [])\n\n\n  const fetchData = async () => {\n    const response = await fetch(`https://www.flickr.com/services/rest/?method=flickr.galleries.getPhotos&api_key=b2f10795395cc5e3fba574d317f41d94&gallery_id=72157719572751649&per_page=${numberOfPages}&page=1&format=json&nojsoncallback=1`)\n    const data = await response.json()\n    setImages(data.photos.photo)\n  }\n\n  while (images.length !== 0) {\n    const cut_photo = images.splice(0, 5)\n    sortImages.push(cut_photo)\n    let cuur_id_photo = 0;\n    sortImages.forEach((n) => {\n      n.forEach(element => {\n        element.id_photo = cuur_id_photo++\n      });\n    })\n  }\n\n  return (\n\n    <div className=\"App\">\n      <Images sortImages={sortImages} />\n      <KeyFocus fetchData={fetchData} sortImages={sortImages} />\n    </div>\n\n  );\n}\n\nexport default App;\n\n\n\n\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter basename={process.env.PUBLIC_URL}>\n      <App />\n    </BrowserRouter>\n\n  </React.StrictMode>,\n  document.getElementById('root')\n);\nreportWebVitals();\n"],"sourceRoot":""}